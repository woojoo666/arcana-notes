<html>
<body>
<script>


// every block should be parsed independently
// keep track of the blockLevel to determine what object we are defining


// Grammar:

// Object 	::= ( Templt Block ) | Templt INDENT Block DEDENT							creation
// Object 	::= Object( Templt Block ) | Object Templt INDENT Block DEDENT				cloning
// Templt 	::= template | ε															templates
// Block 	::= Statemnt, Block
// Statemnt ::= Key: Object																properties
// Block 	::= Object, Block | Object Block											list items (can't use Statemnt nonterminal here, because of the special spaces separator)
// Block 	::= Statemnt | ε
// Object 	::= Object.Name | Object.#Tag | Object[Object]								property access (property names can start with #)
// Object 	::= Name | _Name															objects can refer to public or private vars
// Object 	::= Object Op Object														operators
// Statemnt ::= Object <: Object														insertion
// Statemnt ::= tag #Tag: Object														tag declaration (note that tag names cannot start with #)
// Statemnt ::= Object.#Tag: Object														tag usage
// Tag 		::= Name
// Statemnt ::= if (Object) Object else Object											conditionals
// Statemnt ::= for Key in Object: Block												for-loop
// Key 		::= Name

// first: convert indentation into INDENT and DEDENT, convert newlines to commas, and ignore indentation and newlines in braced blocks.
//        convert words and operators into tokens
//
// then parse everything using an LL parser


// some empty lines with spaces and tabs in them
var emptyLinesTest = `
	    
	test
 
`;

var test1 = `
a: 10
b: 20
c: (x: a, y: b)
d:
	foo: 1
	bar: 2
`;

function parse(program) {

	var lines = splitIntoLines(program);
	

}

function splitIntoLines(program) {
	return program.split('\n').filter(str => ! /^\s*$/.test(str));   // split into lines and filter out empty lines
}


// TODO: Convert newlines to commas

function findBlocks (lines) {
	var counter = 0;

	if (lines.length <= 0) return;

	var indentationLevel = lines[0];

	for (let i = 0; i < lines.length; i++) {
		let line = lines[i];

		// TODO: FINISH THIS
	}
}

console.log(splitIntoLines(emptyLinesTest));
console.log(parse(test1));

</script>
</body>
</html>
